<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>vitrum/node_123 @ GitHub</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>  
<script type="text/javascript">  
    var host = 'ec2-184-73-9-238.compute-1.amazonaws.com';  
    var port = 8080;  
    var url = 'ws://'+host+':'+port+'/';  
    var ws;  
    $(document).ready(function () {  
  
        if ("WebSocket" in window) {  
            debug("Browser supports web sockets!", 'success');  
              
            connect(url);  
            $('#console_send').removeAttr('disabled');  
        } else {  
            debug("Browser does not support web sockets", 'error');  
        };  
  
        // function to send data on the web socket  
        function ws_send(str) {  
            try {  
                ws.send(str);  
            } catch (err) {  
                debug(err, 'error');  
            }  
        }  
  
        // connect to the specified host  
        function connect(host) {  
  
            debug("Connecting to " + host + " ...");  
            try {  
                ws = new WebSocket(host); // create the web socket  
            } catch (err) {  
                debug(err, 'error');  
            }  
            $('#host_connect').attr('disabled', true); // disable the 'reconnect' button  
  
            ws.onopen = function () {  
                debug("connected... ", 'success'); // we are in! :D  
            };  
  
            ws.onmessage = function (evt) {  
                debug(evt.data, 'response'); // we got some data - show it omg!!  
            };  
  
            ws.onclose = function () {  
                debug("Socket closed!", 'error'); // the socket was closed (this could be an error or simply that there is no server)  
                $('#host_connect').attr('disabled', false); // re-enable the 'reconnect button  
            };  
        };  
  
        // function to display stuff, the second parameter is the class of the <p> (used for styling)  
        function debug(msg, type) {  
            $("#console").append('<p class="' + (type || '') + '">' + msg + '</p>');  
        };  
  
        // the user clicked to 'reconnect' button  
        $('#host_connect').click(function () {  
            debug("\n");  
            connect($('#host').val());  
        });  
  
        // the user clicked the send button  
        $('#console_send').click(function () {  
            ws_send($('#console_input').val());  
        });  
          
        $('#console_input').keyup(function (e) {  
            if(e.keyCode == 13) // enter is pressed  
                ws_send($('#console_input').val());  
        });  
  
    });  
    

</script>   
  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #6025f0;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #9fda0f; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #9fda0f; }
    h3 { text-align: center; color: #9fda0f; }
    a { color: #9fda0f; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
        .error {color: red;}  
    .success {color: green;}  
    #console_wrapper {background-color: black; color:white;padding:5px;}  
    #console p {padding:0;margin:0;} 
    
    #btnInit { 
    display:block;
    background:-webkit-gradient(linear,left top,left bottom,from(#959595),to(#efefef));
    background:-moz-linear-gradient(center bottom,#959595,#efefef);
    border-radius: 4px 4px 4px 4px;
    line-height: 15px;
    height: 50px;
    margin: 4px 0 0 4px;
    padding: 10px;
    text-align: center;
    width: 200px;}
  </style>
</head>

<body>
  <div>  
      <button id="btnInit" >Find my location</button>  
    </div> 
<div id="info"></div>

<script>
  /*geolocation  */
  var touchTime = 1 ;
        jQuery(window).ready(function(){  
            jQuery("#btnInit").click(initiate_geolocation);  
        });  
  
        function initiate_geolocation() {  
            navigator.geolocation.getCurrentPosition(handle_geolocation_query,errorCallback);  
        }  
        function errorCallback(error) {
          // Update a div element with error.message.
          var text = "touchTime:" + touchTime + "<br/>error.message: "  + error.message + "<br/>" ;;
          jQuery("#info").prepend(text); 
          touchTime = touchTime + 1 ;
        }
        function handle_geolocation_query(position){  
 
            var text =  "touchTime:" + touchTime + "<br/>Latitude: "  + position.coords.latitude  + "<br/>" +  
               "Longitude: " + position.coords.longitude + "<br/>" +  
               "Accuracy: "  + position.coords.accuracy  + "m<br/>" +  
               "Time: " + new Date(position.timestamp)+ "<br/><br/>" ;  
            jQuery("#info").prepend(text); 
            touchTime = touchTime + 1 ;
                  
                  
        }  
 

    


</script>
</body>
</html>
